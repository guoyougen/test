<div style='display: none'>
  Date: 2022-01-15 10:54:05
  LastEditors: gyg
  LastEditTime: 2022-01-15 14:04:06
  FilePath: \test\存储1_15.mm.md
</div>

# 深入理解文件系统（存储部分）

>万物皆文件

1. 什么是文件
2. 什么是目录

- **文件 :**  数据+为何属性（文件名称 类型 创建时间 所有者 大小 改文件在磁盘上的block指针位置）

- **目录 :**  就是一个表，没有任何文件，完全就不是一个容器（是文件和inode值的对应关系表）

inode
每个文件都会对应一个inode值
inode 值存储了文件的元数据信息
文件类型 文件权限 UID GID 文件连接数 文件大小 文件创建时间 文件的数据块block在磁盘上的块指针

对人而言：识别的是文件名
对系统而言：认识的是inode 
什么是目录 目录是 文件名和inode的对应的表。

系统到底是如何工作的

cp 系统分配一个新的node值 并且添加到node表
在新的目录里面 给这个inode 关联一个文件名
把数据拷贝到磁盘的新位置

mv 在新的目录下，创建一条列表记录 关联源文件的inode值 新的文件名会删除旧的目录下 文件和inode 关联关系
原数据在磁盘上未发生任何改动，所有元属性全部保存

硬链接 ln 源文件 目标位置 + 新名称
就是把文件的inode值 关联给了一个新的名称 并且加入了目录列表
本质上是同一个文件 多了一个入口

硬链接 绝对不能跨越文件系统的

软链接 ln -s 源文件 目标位置+新名称
会产生一个新的文件 用来执行之前那个文件 会产生新的inode值
可以跨越文件系统

rm 链接数-1 如果此时链接数=0 则直接回收该文件
    文件和inode 映射关系会从目录中拿掉，同时磁盘指针会标志该存储区域可用，但是数据并不会擦除，直到下次被其他数据覆盖
链接数 不等于0 inode 值依然保留，只会把目录当中的一个连接拿掉，其他的文件元数据保持不变

文件类型:
类型|缩写
:-: | :-:
普通文件 |-
目录|d
链接文件|l
设备文件|c  
^|b 

文件系统的使用情况
`df` |
:-: |:-:
-h|
-i|
T|

`du`|查看目录大小
:-: | :-:



linux设备命名方式
SATA 机械硬盘 /usb   |  /dev/sda  | /dev/sdb |  /dev/sdc
:-: | :-: | :-: |:-:
虚拟机里面           |   /dev/vda  | /dev/vdb|/dev/vdc
SSD 固态硬盘          | /dev/nvme1|/dev/nvme2|/dev/nvme3
逻辑卷|/dev/mapper1|/dev/mapper2|/dev/mapper3

识别文件系统的设备

分区：将硬盘的整体存储空间划分多个独立的区域

格式化：按照要求创建一个新的文件系统

文件系统：